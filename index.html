<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Declaração de Residência</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cleave.js@1.6.0/dist/cleave.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }

    .container {
      background: white;
      max-width: 800px;
      margin: auto;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      text-align: center;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    input,
    textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Declaração de Residência</h1>
    <form id="residenceForm">
      <label>Nome Completo:</label>
      <input type="text" id="nome" oninput="capitalizeWords(this)" required />

      <label>Nacionalidade:</label>
      <input type="text" id="nacionalidade" required />

      <label>CPF:</label>
      <input type="text" id="cpf" required />

      <label>RG:</label>
      <input type="text" id="rg" required />

      <label>Órgão Expedidor:</label>
      <input type="text" id="orgao" required />

      <label>Telefone:</label>
      <input type="text" id="telefone" required />

      <label>Endereço Completo:</label>
      <textarea id="endereco" required></textarea>

      <label>Local:</label>
      <input type="text" id="local" required />

      <label>Data:</label>
      <input type="date" id="data" required />

      <button type="button" onclick="gerarPDF()">Gerar PDF</button>
    </form>
  </div>

  <script>

    new Cleave('#cpf', {
      delimiters: ['.', '.', '-'],
      blocks: [3, 3, 3, 2],
      numericOnly: true
    });

    new Cleave('#telefone', {
      delimiters: [' ', '-'],
      blocks: [2, 5, 4],
      numericOnly: true
    });

    function capitalizeWords(input) {
      let words = input.value.toLowerCase().split(' ');
      input.value = words.map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
    }

    async function gerarPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const nome = document.getElementById("nome").value;
      const nacionalidade = document.getElementById("nacionalidade").value;
      const cpf = document.getElementById("cpf").value;
      const rg = document.getElementById("rg").value;
      const orgao = document.getElementById("orgao").value;
      const telefone = document.getElementById("telefone").value;
      const endereco = document.getElementById("endereco").value;
      const local = document.getElementById("local").value.toUpperCase();
      const data = document.getElementById("data").value.split("-").reverse().join("/").toUpperCase();

      const texto = `
Eu, ${nome}, ${nacionalidade}, CPF nº ${cpf}, RG nº ${rg}, Órgão Exped. ${orgao}, telefone (${telefone}), na falta de documentos para comprovação de residência, em conformidade com o disposto na Lei 7.115, de 29 de agosto de 1983, DECLARO para os devidos fins, sob penas da Lei, ser residente e domiciliado no endereço: ${endereco}.

Por ser verdade, firmo a presente declaração para que produza os efeitos legais, ciente de que a falsidade de seu conteúdo pode implicar na imputação de sanções civis, administrativas, bem como na sanção penal prevista no art. 299 do Código Penal, conforme abaixo:

Art. 299 – Omitir, em documento público ou particular, declaração que nele deveria constar, ou nele inserir ou fazer inserir declaração falsa ou diversa da que devia ser escrita, com o fim de prejudicar direito, criar obrigação ou alterar a verdade sobre o fato juridicamente relevante.

Pena: reclusão de 1 (um) a 5 (cinco) anos e multa, se o documento é público e reclusão de 1 (um) a 3 (três) anos, se o documento é particular.
      `.trim();

 
      doc.setFont("Times", "bold");
      doc.setFontSize(16);
      doc.text("DECLARAÇÃO DE RESIDÊNCIA", 105, 20, { align: "center" });

   
      doc.setFont("Times", "normal");
      doc.setFontSize(12);
      const lines = doc.splitTextToSize(texto, 180); // maxWidth = 180mm
      doc.text(lines, 15, 30); 


      const yEnd = 30 + lines.length * 6;


      doc.setFontSize(12);
      doc.text(`${local}, ${data}`, 15, yEnd + 20);


      doc.setFontSize(14);
      doc.text("___________________________________", 15, yEnd + 40);
      doc.text("ASSINATURA DO DECLARANTE", 15, yEnd + 50);

      doc.save("Declaracao_Residencia.pdf");
    }
  </script>
</body>
</html>
